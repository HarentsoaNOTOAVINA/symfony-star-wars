<VirtualHost *:80>
    ServerName immo-back.loc

    DocumentRoot /var/www/immo/public
    DirectoryIndex /index.php

    <Directory /var/www/immo/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/immo/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName immo-back54.loc

    DocumentRoot /var/www/immo-back54/public
    DirectoryIndex /index.php

    <Directory /var/www/immo-back54/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/immo-back54/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName immo-assurance.loc

    DocumentRoot /var/www/immo_assurance/public
    DirectoryIndex /index.php

    <Directory /var/www/immo_assurance/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>
    <Directory /var/www/immo_assurance/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName immo-event.loc

    DocumentRoot /var/www/immo-event/public
    DirectoryIndex /index.php

    <Directory /var/www/immo-event/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>
    <Directory /var/www/immo-event/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName immo-bank.loc

    DocumentRoot /var/www/immo-bank/public
    DirectoryIndex /index.php

    <Directory /var/www/immo-bank/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/immo-bank/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName bank.loc

    DocumentRoot /var/www/bank/public
    DirectoryIndex /index.php

    <Directory /var/www/bank/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/bank/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName immoch-calcul.loc

    DocumentRoot /var/www/immo_calcul/public
    DirectoryIndex /index.php

    <Directory /var/www/immo_calcul/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/immo_calcul/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName polygons.test

    DocumentRoot /var/www/polygons/public
    DirectoryIndex /index.php

    <Directory /var/www/polygons/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/polygons/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
    ServerName cocolis.loc

    DocumentRoot /var/www/cocolis/public
    DirectoryIndex /index.php

    <Directory /var/www/cocolis/public>
        AllowOverride All
        Order Allow,Deny
        Allow from All

        FallbackResource /index.php
    </Directory>

    # uncomment the following lines if you install assets as symlinks
    # or run into problems when compiling LESS/Sass/CoffeeScript assets
    # <Directory /var/www/immo/project>
    #     Options FollowSymlinks
    # </Directory>

    # optionally disable the fallback resource for the asset directories
    # which will allow Apache to return a 404 error when files are
    # not found instead of passing the request to Symfony
    <Directory /var/www/cocolis/public/bundles>
        FallbackResource disabled
    </Directory>
    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined

    # optionally set the value of the environment variables used in the application
    #SetEnv APP_ENV prod
    #SetEnv APP_SECRET <app-secret-id>
    #SetEnv DATABASE_URL "mysql://db_user:db_pass@host:3306/db_name"
</VirtualHost>

<VirtualHost *:80>
  ServerName immoch-front.loc
  ServerAlias www.immoch-front.loc
  ProxyRequests Off
  ProxyPreserveHost On
  ProxyVia Full
  <Proxy *>
      Require all granted
  </Proxy>
  ProxyPass / http://127.0.0.1:3000/
  ProxyPassReverse / http://127.0.0.1:3000/
  ProxyPass /api http://immoch.loc/api
  ProxyPassReverse /api http://immoch.loc/api
</VirtualHost>

<VirtualHost *:80>
  ServerName cocolis-front.loc
  ServerAlias www.cocolis-front.loc
  ProxyRequests Off
  ProxyPreserveHost On
  ProxyVia Full
  <Proxy *>
      Require all granted
  </Proxy>
  ProxyPass / http://127.0.0.1:3003/
  ProxyPassReverse / http://127.0.0.1:3003/
  ProxyPass /api http://cocolis.loc/api
  ProxyPassReverse /api http://cocolis.loc/api
</VirtualHost>

<VirtualHost *:80>
        ServerName api.monetizer.studio
        ServerAlias www.api.monetizer.studio

        DocumentRoot "/var/www/api-skoleom/public"
        DirectoryIndex /index.php

        <Directory "/var/www/api-skoleom">
                Options FollowSymLinks
                AllowOverride all
                Require all granted
        </Directory>
        <FilesMatch \.php$>
          <If "-f %{REQUEST_FILENAME}">
            SetHandler "proxy:unix:/run/php/php8.1 |fcgi://localhost"
          </If>
        </FilesMatch>
        ErrorLog /var/log/apache2/error.api-skoleom.log
        CustomLog /var/log/apache2/access.api-skoleom.log combined
RewriteEngine on
RewriteCond %{SERVER_NAME} =www.api.monetizer.studio [OR]
RewriteCond %{SERVER_NAME} =api.monetizer.studio
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>

